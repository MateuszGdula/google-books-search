{"version":3,"sources":["App.module.scss","components/form/Form.module.scss","components/search-results/ListItem.module.scss","assets/no-cover.jpg","Context.js","components/form/Form.js","components/search-results/ListItem.js","components/search-results/SearchResults.js","App.js","index.js"],"names":["module","exports","wrapper","form","listItem__wrapper","listItem__image","listItem__textWrapper","listItem__title","listItem__description","__webpack_require__","p","AppContext","React","createContext","clickBtn","document","querySelector","click","Form","react_default","a","createElement","Context","Consumer","context","className","styles","onSubmit","buildQueryString","type","placeholder","required","onChange","name","value","defaultChecked","ListItem","_ref","title","cover","description","link","href","target","rel","src","thumbnail","noCover","alt","length","concat","slice","defaultProps","SearchResults","Fragment","infoText","books","map","index","id","volumeInfo","search_results_ListItem","key","toString","imageLinks","infoLink","isLoading","initState","request","numberOfBooks","errorText","App","state","e","preventDefault","_this","setState","q","encodeURIComponent","orderBy","queryString","sendRequest","Axios","get","then","res","data","prevState","Object","toConsumableArray","items","totalItems","catch","error","message","setTimeout","getMoreData","contextElements","objectSpread","this","Provider","form_Form","search_results_SearchResults","_this2","window","addEventListener","Math","floor","innerHeight","scrollY","body","offsetHeight","Component","ReactDOM","render","src_App","getElementById"],"mappings":"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","file":"static/js/main.40deed64.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"App_wrapper__3JOml\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"Form_form__RgC28\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"listItem__wrapper\":\"ListItem_listItem__wrapper__hRPaT\",\"listItem__image\":\"ListItem_listItem__image__2h4BG\",\"listItem__textWrapper\":\"ListItem_listItem__textWrapper__2uIwE\",\"listItem__title\":\"ListItem_listItem__title__1u9IK\",\"listItem__description\":\"ListItem_listItem__description__1qC6q\"};","module.exports = __webpack_public_path__ + \"static/media/no-cover.7f8724d9.jpg\";","import React from 'react';\r\n\r\nconst AppContext = React.createContext();\r\n\r\nexport default AppContext;","import React from 'react'\r\nimport styles from './Form.module.scss'\r\nimport AppContext from '../../Context'\r\n\r\nconst clickBtn =  () => {\r\n    document.querySelector(\"button\").click();\r\n}\r\n\r\nconst Form = () => (\r\n    <AppContext.Consumer>\r\n        {(context) => (\r\n\r\n        <form className={styles.form} onSubmit={ context.buildQueryString }>\r\n\r\n            <div className=\"input-group\">\r\n                <span className=\"input-group-addon\">Book title:</span>\r\n                <input type=\"text\" className=\"form-input\" placeholder=\"...\" required />\r\n                <button className=\"btn btn-primary input-group-btn\">\r\n                    Search\r\n                </button>\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"form-radio form-inline\">\r\n                    <input onChange={ clickBtn } type=\"radio\" \r\n                    name=\"order\" value=\"relevance\" defaultChecked />\r\n                    <i className=\"form-icon\"></i> \r\n                    Order by relevance\r\n                </label>\r\n                <label className=\"form-radio form-inline\">\r\n                    <input onChange={ clickBtn } type=\"radio\" \r\n                    name=\"order\" value=\"newest\" />\r\n                    <i className=\"form-icon\"></i> \r\n                    Order by newest\r\n                </label>\r\n            </div>\r\n\r\n        </form>\r\n        )}\r\n    </AppContext.Consumer> \r\n);\r\n\r\nexport default Form;","import React from 'react'\r\nimport styles from './ListItem.module.scss'\r\nimport PropTypes from 'prop-types';\r\nimport noCover from '../../assets/no-cover.jpg'\r\n\r\n\r\nconst ListItem = ({title, cover, description, link}) => (\r\n\r\n    <li className={styles.listItem__wrapper}>\r\n\r\n        <a href={ link } target=\"_blank\" rel=\"noopener noreferrer\">\r\n            <img src={ cover.thumbnail || noCover } alt={title} className={styles.listItem__image} />\r\n        </a>\r\n\r\n        <div className={ styles.listItem__textWrapper }>\r\n            <a href= { link } target=\"_blank\" rel=\"noopener noreferrer\">\r\n                <h2 className={styles.listItem__title}>{ title }</h2>\r\n            </a>\r\n            <p className={styles.listItem__description}>\r\n                { description.length > 200 ? `${description.slice(0, 200)}..` : description }\r\n            </p>\r\n        </div>\r\n\r\n    </li>    \r\n);\r\n\r\nListItem.propTypes = {\r\n    title: PropTypes.string.isRequired,\r\n    cover: PropTypes.oneOfType([\r\n        PropTypes.string,\r\n        PropTypes.object\r\n    ]),\r\n    description: PropTypes.string,\r\n    link: PropTypes.string\r\n};\r\n\r\nListItem.defaultProps = {\r\n    cover: noCover,\r\n    description: 'No description available.'\r\n}\r\n\r\nexport default ListItem;","import React from 'react'\r\nimport AppContext from '../../Context'\r\nimport ListItem from './ListItem'\r\n\r\nconst SearchResults = () => ( \r\n    <AppContext.Consumer>\r\n        {(context) => (\r\n            <> \r\n                {/* render list depended on books array length */}\r\n                <p>{context.infoText}</p>\r\n                {context.books.length !== 0 ?\r\n                (\r\n                    <ul>\r\n                        {\r\n                        context.books.map(({ id, volumeInfo }, index) =>(\r\n\r\n                            <ListItem \r\n                                key={ id + index.toString() }\r\n                                title={ volumeInfo.title }\r\n                                cover={ volumeInfo.imageLinks }\r\n                                description={ volumeInfo.description }\r\n                                link={ volumeInfo.infoLink }\r\n                            />\r\n\r\n                        ))}\r\n                    </ul>\r\n                ) : null\r\n                }\r\n                \r\n                {/* render loading div on send request */}\r\n                {\r\n                context.isLoading ? \r\n                (\r\n                    <div className=\"loading loading-lg\"></div>\r\n                ) : null\r\n                }\r\n            </>\r\n        )}\r\n    </AppContext.Consumer>\r\n    \r\n);\r\n\r\nexport default SearchResults;","import React from 'react'\nimport styles from './App.module.scss'\nimport AppContext from './Context'\nimport Axios from 'axios'\nimport Form from './components/form/Form'\nimport SearchResults from  './components/search-results/SearchResults'\n\nconst initState = {\n  books: [],\n  request: \"\",\n  isLoading: false,\n  numberOfBooks: 0,\n  infoText: \"\",\n  errorText: \"\"\n}\n\nclass App extends React.Component {\n\n  state = {\n    ...initState\n  }\n\n  \n  buildQueryString = (e) => {\n    {/* reset state and send new request when form parametrs is changed */}\n    e.preventDefault();\n\n    this.setState(initState);\n\n    const q = `&q=${encodeURIComponent(document.querySelector(\"input[type=text]\").value)}`;\n    const orderBy = `&orderBy=${document.querySelector(\"input[type=radio]:checked\").value}`;\n    const queryString = `https://www.googleapis.com/books/v1/volumes?maxResults=10${q}${orderBy}`\n\n    {/* save queryString to state and send request */}\n\n    this.setState({\n      isLoading: true,\n      request: queryString\n    })\n\n    this.sendRequest(queryString)\n    \n  }\n\n\n  sendRequest = (request) => {\n  {/* send async request and set app state based on response, resend request on error */}\n\n  Axios.get(request)\n    .then(res => {\n      \n      if(\"items\" in res.data){\n\n        this.setState(prevState => ({\n          books: [...prevState.books, ...res.data.items],\n          isLoading: false,\n          numberOfBooks: res.data.totalItems,\n          infoText: `${res.data.totalItems} results found`\n        }));\n\n      } else {\n\n        this.setState({\n          isLoading: false,\n          infoText: \"No results found\"\n        });\n\n      }\n    })\n    .catch( error => {\n \n      this.setState({\n        errorText: `Error: ${error.message}`\n      })\n\n      setTimeout(() => {\n        this.sendRequest(request)\n      }, 1000);\n      \n    })\n  }\n\n  getMoreData = () => {\n    {/* return if there are no more books in google library or on waiting for response */}\n    if(this.state.numberOfBooks === this.state.books.length || this.state.isLoading) return;\n\n    {/* add start index to query bades on books array lenght */}\n    const request = `${this.state.request}&startIndex=${this.state.books.length}`;\n\n    this.setState({\n      isLoading: true\n    })\n\n    this.sendRequest(request);\n  }\n\n  render() {\n\n    const contextElements = {\n      ...this.state,\n      buildQueryString: this.buildQueryString\n    }\n    \n    return (\n      <AppContext.Provider value={ contextElements }>\n        <div className={ styles.wrapper }>\n          <h1>Google books search</h1>\n          <Form />\n          <SearchResults />\n        </div>\n      </AppContext.Provider>\n    );\n  };\n\n  componentDidMount(){\n    {/* get more data if window is scrolled to bottom */}\n    window.addEventListener(\"scroll\", () => {\n        (Math.floor(window.innerHeight + window.scrollY) + 1) >= document.body.offsetHeight && this.getMoreData();\n    }, false);\n  };\n\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}